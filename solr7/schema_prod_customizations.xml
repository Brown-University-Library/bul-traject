  <types>
    <!-- used for title_spell -->
    <fieldType name="textSpell" class="solr.TextField" positionIncrementGap="100">
      <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
    </fieldType>

    <!-- used for title_sort -->
    <fieldType name="alphaOnlySort" class="solr.TextField" sortMissingLast="true" omitNorms="true">
      <analyzer>
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.TrimFilterFactory"/>
        <filter class="solr.PatternReplaceFilterFactory" pattern="([^a-z])" replacement="" replace="all"/>
      </analyzer>
    </fieldType>
  </types>

  <fields>
    <!--
      Our fields.
      Notable changes:
      "text" is now "text_general"
      "tint" is now "pint" ???
    -->
    <field name="timestamp" type="date" indexed="true" stored="true" default="NOW" multiValued="false"/>
    <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>
    <field name="marc_display" type="string" indexed="false" stored="true" multiValued="false"/>
    <field name="title_display" type="string" indexed="false" stored="true" multiValued="false"/>
    <field name="title_primary_search" type="text_general" indexed="true" stored="true" multiValued="false"/>
    <field name="title_vern_display" type="string" indexed="false" stored="true" multiValued="false"/>
    <field name="subtitle_display" type="string" indexed="false" stored="true" multiValued="false"/>
    <field name="subtitle_vern_display" type="string" indexed="false" stored="true" multiValued="false"/>
    <field name="author_display" type="string" indexed="false" stored="true" multiValued="false"/>
    <field name="author_vern_display" type="string" indexed="false" stored="true" multiValued="false"/>
    <field name="isbn_t" type="text" indexed="true" stored="true" multiValued="true"/>
    <field name="language_facet" type="string" indexed="true" stored="true" multiValued="true"/>
    <field name="subject_topic_facet" type="string" indexed="true" stored="true" multiValued="true"/>
    <field name="subject_era_facet" type="string" indexed="true" stored="true" multiValued="true"/>
    <field name="subject_geo_facet" type="string" indexed="true" stored="true" multiValued="true"/>
    <field name="pub_date" type="string" indexed="true" stored="true" multiValued="true"/>
    <field name="pub_date_sort" type="tint" indexed="true" stored="true" multiValued="false"/>
    <field name="format" type="string" indexed="true" stored="true"/>

    <!-- not in managed_schema.xml -->
    <dynamicField name="*_display" type="string" indexed="false" stored="true" multiValued="true"/>
    <dynamicField name="*_facet" type="string" indexed="true" stored="false" multiValued="true"/>

    <!-- not in managed_schema.xml, replaced with *_t_sort and *_txt_sort? -->
    <dynamicField name="*_sort" type="alphaOnlySort" indexed="true" stored="false" multiValued="false"/>

    <!-- not in managed_schema.xml -->
    <dynamicField name="*_unstem_search" type="text_general" indexed="true" stored="false" multiValued="true"/>

    <!-- not in managed_schema.xml -->
    <dynamicField name="*spell" type="textSpell" indexed="true" stored="false" multiValued="true"/>

    <!--
      FIELDS CHANGED
      *_t went from "text" to "text_general" and from multiValued to NOT multiValued
      *_dt went from "date" to "pdate"
      *_i went from "int" to "pint"
      *_ss went from "string" (multiValued=TRUE) to "strings"
      *_l went form "long" to "plong"
      *_f went from "float" to "pfloat"
      *_d went from "double" to "pdouble"

      FIELDS DROPPED
      *_ti, *_tl, *_tf, *_td, *_tdt
    -->
  </fields>

  <!-- not in managed_schema.xml -->
  <copyField source="title_display" dest="title_unstem_search"/>
  <copyField source="title_t" dest="title_other_unstem_search"/>
  <copyField source="subtitle_t" dest="subtitle_other_unstem_search"/>
  <copyField source="title_series_t" dest="title_series_unstem_search"/>
  <copyField source="author_t" dest="author_unstem_search"/>
  <copyField source="author_addl_t" dest="author_addl_unstem_search"/>
  <copyField source="subject_t" dest="subject_unstem_search"/>
  <copyField source="subject_addl_t" dest="subject_addl_unstem_search"/>
  <copyField source="subject_topic_facet" dest="subject_topic_unstem_search"/>
  <copyField source="pub_date" dest="pub_date_sort"/>
  <copyField source="*_t" dest="spell"/>
  <copyField source="*_facet" dest="spell"/>
  <copyField source="title_t" dest="title_spell"/>
  <copyField source="subtitle_t" dest="title_spell"/>
  <copyField source="addl_titles_t" dest="title_spell"/>
  <copyField source="title_added_entry_t" dest="title_spell"/>
  <copyField source="title_series_t" dest="title_spell"/>
  <copyField source="author_t" dest="author_spell"/>
  <copyField source="author_addl_t" dest="author_spell"/>
  <copyField source="subject_topic_facet" dest="subject_spell"/>
  <copyField source="subject_t" dest="subject_spell"/>
  <copyField source="subject_addl_t" dest="subject_spell"/>
  <copyField source="title_t" dest="opensearch_display"/>
  <copyField source="subtitle_t" dest="opensearch_display"/>
  <copyField source="title_series_t" dest="opensearch_display"/>
  <copyField source="author_t" dest="opensearch_display"/>
  <copyField source="author_addl_t" dest="opensearch_display"/>
  <copyField source="subject_topic_facet" dest="opensearch_display"/>
  <copyField source="subject_t" dest="opensearch_display"/>
  <copyField source="subject_addl_t" dest="opensearch_display"/>
